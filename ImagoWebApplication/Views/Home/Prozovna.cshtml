@{
    ViewData["Title"] = "Školení a doškolování";
}

@{
    var images = ViewBag.Images as List<Dictionary<string, string>>;
    var filteredImages = images?.Where(img => img["EntryKey"].Contains("Školení")).ToList() ?? new List<Dictionary<string, string>>();
    var prozovnaImage = images?.Where(img => img["EntryKey"].Contains("018963c6-8446-4fb8-a0d9-8a13fc7175ed")).FirstOrDefault();
}


<link rel="stylesheet" href="~/css/prozovna.css" asp-append-version="true" />

<section id="content">
    <div class="inner-content">
        <div class="container">
            @if (ViewBag.Entries.ContainsKey("Skoleni_Title"))
            {
                <h1 class="page-title" data-key="Skoleni_Title">@ViewBag.Entries["Skoleni_Title"]</h1>
            }

            <h2 data-key="Skoleni_Header">@ViewBag.Entries["Skoleni_Header"]</h2>

            <div class="section">
                <h3 data-key="Skoleni_Label_First">@ViewBag.Entries["Skoleni_Label_First"]</h3>
                <p data-key="Skoleni_SubLabel_First">@ViewBag.Entries["Skoleni_SubLabel_First"]</p>
                <div class="image-container">
                    @if (prozovnaImage != null)
                    {
                        <img src="data:image/jpeg;base64,@prozovnaImage["Base64"]" alt="Školení" class="img-responsive">
                    }
                    else{
                        <p style="text-align:center;">Omlouvám se, došlo k chybě při načítání obrázků.</p>
                    }
                </div>
            </div>

            <div class="section">
                <h3 data-key="Skoleni_Label_Second">@ViewBag.Entries["Skoleni_Label_Second"]</h3>
                <p data-key="Skoleni_SubLabel_Second">@ViewBag.Entries["Skoleni_SubLabel_Second"]</p>

                <!-- Карусель изображений -->
                @if (filteredImages.Count > 0) { 
                    <div id="imageCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            @for (int i = 0; i < filteredImages.Count; i++)
                            {
                                <div class="carousel-item @(i == 0 ? "active" : "")">
                                    <img src="data:image/png;base64,@filteredImages[i]["Base64"]" class="d-block w-100">
                                </div>
                            }
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#imageCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#imageCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon"></span>
                        </button>
                    </div>
                }
                else{
                    <p style="text-align:center;">Omlouvám se, došlo k chybě při načítání obrázků.</p>
                }
            </div>

            <div class="section">
                <h3 data-key="Skoleni_Label_Third">@ViewBag.Entries["Skoleni_Label_Third"]</h3>
            </div>

            <div class="pricing">
                <h3 data-key="Skoleni_SubLabel_Third">@ViewBag.Entries["Skoleni_SubLabel_Third"]</h3>
                <table class="pricing-table">
                    <thead>
                        <tr>
                            <th data-key="Pricing_Service_Label">@ViewBag.Entries["Pricing_Service_Label"]</th>
                            <th data-key="Pricing_Price_Label">@ViewBag.Entries["Pricing_Price_Label"]</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-key="Pricing_BioScan_Label">@ViewBag.Entries["Pricing_BioScan_Label"]</td>
                            <td data-key="Pricing_BioScan_Price">@ViewBag.Entries["Pricing_BioScan_Price"]</td>
                        </tr>
                        <tr>
                            <td data-key="Pricing_Freq_Label">@ViewBag.Entries["Pricing_Freq_Label"]</td>
                            <td data-key="Pricing_Freq_Price">@ViewBag.Entries["Pricing_Freq_Price"]</td>
                        </tr>
                        <tr>
                            <td data-key="Pricing_Training_Label">@ViewBag.Entries["Pricing_Training_Label"]</td>
                            <td data-key="Pricing_Training_Price">@ViewBag.Entries["Pricing_Training_Price"]</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<script>
    var myCarousel = document.querySelector('#imageCarousel');
    var carousel = new bootstrap.Carousel(myCarousel, {
        interval: 3000,
        wrap: true
    });
</script>